From 6929810e780bd7f88adf27c79c1ecc9e4ca2413b Mon Sep 17 00:00:00 2001
From: Joachim Breitner <mail@joachim-breitner.de>
Date: Tue, 12 Jan 2010 11:44:59 +0100
Subject: Use set/getPtr in pyconsole code

---
 serna/plugins/pyconsole/QtPyDialog.cxx |    2 +-
 serna/plugins/pyplugin/pyplugin.cxx    |    8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/serna/plugins/pyconsole/QtPyDialog.cxx b/serna/plugins/pyconsole/QtPyDialog.cxx
index 15dcbbb..377f6c2 100644
--- a/serna/plugins/pyconsole/QtPyDialog.cxx
+++ b/serna/plugins/pyconsole/QtPyDialog.cxx
@@ -153,7 +153,7 @@ QtPyDialogImpl::QtPyDialogImpl(QWidget* w,
     setupUi(this);
 
     pfunc_ = (pyrss_func) SernaConfig::root().
-        getSafeProperty(PYTHON_RSS_PROP).getInt();
+        getSafeProperty(PYTHON_RSS_PROP).getPtr();
     if (0 == pfunc_)
         commandLineEdit_->setEnabled(false);
     textEdit_->clear();
diff --git a/serna/plugins/pyplugin/pyplugin.cxx b/serna/plugins/pyplugin/pyplugin.cxx
index c32376b..3a6f652 100644
--- a/serna/plugins/pyplugin/pyplugin.cxx
+++ b/serna/plugins/pyplugin/pyplugin.cxx
@@ -213,10 +213,10 @@ static PyObject* init_pyclass(SernaApiBase* props, SString& className)
         DYNCALL("Py_Initialize");
         DYNCALL("PyEval_InitThreads");
         PropertyNode cfgRoot(SernaConfig::root());
-        int pfunc = (int)DL_SYM("PyRun_SimpleString");
-        cfgRoot.makeDescendant(PYTHON_RSS_PROP).setInt(pfunc);
-        pfunc = (int)py_run_file;
-        cfgRoot.makeDescendant(PYTHON_RSF_PROP).setInt(pfunc);
+        void* pfunc = (void*)DL_SYM("PyRun_SimpleString");
+        cfgRoot.makeDescendant(PYTHON_RSS_PROP).setPtr(pfunc);
+        pfunc = (void*)py_run_file;
+        cfgRoot.makeDescendant(PYTHON_RSF_PROP).setPtr(pfunc);
         SString plugins_bin_dir = SernaConfig::getProperty("vars/plugins_bin");
         SString data_dir = SernaConfig::getProperty("vars/data_dir");
         py_run("import sys");
-- 
1.6.6

